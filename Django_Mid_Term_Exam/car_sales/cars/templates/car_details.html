{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <img src="{{ car.image.url }}" class="card-img-top" alt="{{ car.title }}" style="max-height: auto; object-fit: cover;">
        <div class="card-body">
            <h2 class="card-title">{{ car.title }}</h2>
            <p class="card-text"><strong>Price:</strong> ${{ car.price }}</p>
            <p class="card-text"><strong>Brand:</strong> {{ car.brand.name }}</p>
            <p class="card-text"><strong>Quantity:</strong> {{ car.quantity }}</p>
            <p class="card-text"><strong>Description:</strong></p>
            <p>{{ car.description }}</p>
            <br>

            <!-- Show the appropriate button  -->
            {% if request.GET.source == "profile" %}
                <form method="POST" action="{% url 'buy_car' car.id %}">
                    {% csrf_token %}
                    <button class="btn btn-primary btn-lg" type="submit">Buy Again</button>
                </form>
            {% else %}
                <form method="POST" action="{% url 'buy_car' car.id %}">
                    {% csrf_token %}
                    <button class="btn btn-success btn-lg" type="submit">Buy Now</button>
                </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
